 args: '<API-Key> <Guild Name>',
  help: 'Connects the API-Key with Guild Name',
  notservers: [ 'Ryzom Karavan' ],
  main: '(bot, msg, channel) => {\n    var help = "Use: ```xl\\n/amee registerGuild API-Key Guild Name     \'registers the API-Key for Guild Name\'\\n```";\n    var aArg = msg.content.split(\' \');\n    if (aArg.length >= 4) {\n\tvar gKeys = require("./../ressources/ryzomapi/Guild_Keys.json");\n\tvar mGuilds = require("./../ressources/ryzomapi/Guild_Map.json");\n\tvar dServ = msg.guild.id;\n\tvar gKey = aArg[2];\n\tvar rGuild = aArg.splice(3).join(" ");\n\tif (mGuilds[dServ] != undefined && mGuilds[dServ] != rGuild) {\n\t    channel.sendMessage("Attention! There\'s already a guild connected to this server. Your guild key won\'t be connected to this server.");\n\t} else {\n\t    mGuilds[dServ] = rGuild;\n\t    fs.writeFileSync(__dirname + "/../ressources/ryzomapi/Guild_Map.json", JSON.stringify(mGuilds), "utf8");\n\t}\n\tgKeys[rGuild] = gKey;\n\tfs.writeFileSync(__dirname + "/../ressources/ryzomapi/Guild_Keys.json", JSON.stringify(gKeys), "utf8");\n\tupdateAPI(null, true);\n\tchannel.sendMessage("Registered");\n    } else {\n\tchannel.sendMessage("Not enough Arguments. " + help);\n    }\n}' 